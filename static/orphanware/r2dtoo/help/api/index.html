<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>For the Programmer</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="revisit-after" content="30 days">
<meta name="document-date" content="06 Nov 2004 14:49:37 GMT">
<meta name="robots" content="all"><meta name="language" content="English">
<base target="_top"><meta name="document-date" content="30 Apr 2004 13:40:00 13AprBST-8"></head>
<body background="../bg.jpg"><a name="top"><table width="100%"><tr><td><small><small><b><a href="../../../../index.html">Rik's Treehouse</a> &gt; <a href="../../../../compute.html">Babbling in Binary</a> &gt; <a href="../../../../software/index.html">My Software</a> &gt; <a href="../../../../software/orphan.html">Orphanware</a> &gt; <a href="../../../../software/r2dtoo/index.html">R2DToo</a> &gt; <a href="../../../../software/r2dtoo/help/index.html">R2DToo Help</a> &gt; For the Programmer</b></small></small></td></tr></table><img src="../../../../images/top-blank.gif" align="right" width="11" height="10"  alt=""><hr><center><h1>For the Programmer</h1></center>
<table width="100%" cellspacing="2" cellpadding="8"><tr><td valign="top" bgcolor="#ddddff"><small><small><a href="#Introduction">Introduction</a><br></small></small><small><small><a href="#The&nbsp;Programming&nbsp;Interface&nbsp;(API)">The&nbsp;Programming&nbsp;Interface&nbsp;(API)</a><br></small></small><small><small><a href="#Custom&nbsp;data&nbsp;types">Custom&nbsp;data&nbsp;types</a><br></small></small><small><small>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Functions&nbsp;provided&nbsp;by&nbsp;the&nbsp;API">Functions&nbsp;provided&nbsp;by&nbsp;the&nbsp;API</a><br></small></small><small><small>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Functions&nbsp;provided&nbsp;by&nbsp;the&nbsp;model">Functions&nbsp;provided&nbsp;by&nbsp;the&nbsp;model</a><br></small></small><small><small>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Sequence&nbsp;of&nbsp;model&nbsp;function&nbsp;calls">Sequence&nbsp;of&nbsp;model&nbsp;function&nbsp;calls</a><br></small></small><small><small><a href="#Compilers">Compilers</a><br></small></small></td><td width="*" valign="top"><a name="Introduction"><h2>Introduction</h2>
R2DToo consists of three separate layers: the user interface, the programming interface (API) and the model.  The user interface is a compiled executable while the other two layers are dynamic link libraries which are retrieved and used by the executable when it is run.  

<p>The advantage of this separation is that each layer can be modified and replaced without breaking the program.  For the end user this means the ability to write one's own models and run them within R2DToo.  To do this you write code that interacts with the API through function calls.

<a href="#top"><img src="../../../../images/top.gif" align="right" width="11" height="10" alt="Top of page" border="0"></a><hr width="50%"><a name="The&nbsp;Programming&nbsp;Interface&nbsp;(API)"><h2>The&nbsp;Programming&nbsp;Interface&nbsp;(API)</h2>
The API provides functions that the model designer can use.  In return, the model is expected to provide certain functions to the API.  This section lists both sets of functions as well as some data types defined by the API.  

<a href="#top"><img src="../../../../images/top.gif" align="right" width="11" height="10" alt="Top of page" border="0"></a><hr width="50%"><a name="Custom&nbsp;data&nbsp;types"><h>Custom&nbsp;data&nbsp;types</h>
<ul><li><a href="tParam.html">tParam</a>
	<li><a href="pParam.html">pParam</a>
	<li><a href="tState.html">tState</a>
	<li><a href="pState.html">pState</a>
</ul>

<a name="Functions&nbsp;provided&nbsp;by&nbsp;the&nbsp;API"><h3>Functions&nbsp;provided&nbsp;by&nbsp;the&nbsp;API</h3>
<a name="api2model-params"><h4>For handling parameters</h4>

<ul><li><a href="assignParam.html">assignParam</a>
	<li><a href="getParamRef.html">getParamRef</a>
	<li><a href="getParamVal.html">getParamVal</a>
	<li><a href="setParamCount.html">setParamCount</a>
</ul>

<a name="api2model-nbr"><h4>Neighbourhoods</h4>

<ul><li><a href="forEachNbr.html">forEachNbr</a>
	<li><a href="forEachNbrVar.html">forEachNbrVar</a>
	<li><a href="getNbrX.html">getNbrX</a>
	<li><a href="getNbrY.html">getNbrY</a>
	<li><a href="nbrhd1D.html">nbrhd1D</a>
	<li><a href="nbrhdBlocks.html">nbrhdBlocks</a>
	<li><a href="nbrhdCCDM.html">nbrhdCCDM</a>
	<li><a href="nbrhdFractal.html">nbrhdFractal</a>
	<li><a href="nbrhdMoore.html">nbrhdMoore</a>
	<li><a href="nbrhdRandom.html">nbrhdRandom</a>
	<li><a href="nbrhdRandomER.html">nbrhdRandomER</a>
	<li><a href="nbrhdVonNeumann.html">nbrhdVonNeumann</a>
</ul>

<a name="api2model-misc"><h4>Miscellaneous</h4>

<ul><li><a href="anyAgent.html">anyAgent</a>
	<li><a href="assignState.html">assignState</a>
	<li><a href="doSimPause.html">doSimPause</a>
	<li><a href="dprintf.html">dprintf</a>
	<li><a href="forEachAgent.html">forEachAgent</a>
	<li><a href="forEachAgentVar.html">forEachAgentVar</a>
	<li><a href="getTickRef.html">getTickRef</a>
	<li><a href="getTickVal.html">getTickVal</a>
	<li><a href="setStateCount.html">setStateCount</a>
	<li><a href="shuffleAgents.html">shuffleAgents</a>
	<li><a href="xyAgent.html">xyAgent</a>
</ul>

<a href="#top"><img src="../../../../images/top.gif" align="right" width="11" height="10" alt="Top of page" border="0"></a><hr width="50%"><a name="Functions&nbsp;provided&nbsp;by&nbsp;the&nbsp;model"><h3>Functions&nbsp;provided&nbsp;by&nbsp;the&nbsp;model</h3>
<a name="model2api-required"><h4>Required</h4>

<ul><li><a href="getApiVersion.html">getApiVersion</a>
	<li><a href="getSimHeight.html">getSimHeight</a>
	<li><a href="getSimWidth.html">getSimWidth</a>
	<li><a href="onAgentCreate.html">onAgentCreate</a>
	<li><a href="onAgentDraw.html">onAgentDraw</a>
	<li><a href="onTick.html">onTick</a>
</ul>

<a name="model2api-optional"><h4>Optional</h4>

<ul><li><a href="getAgentAbout.html">getAgentAbout</a>
	<li><a href="getAgentHint.html">getAgentHint</a>
	<li><a href="onAgentDestroy.html">onAgentDestroy</a>
	<li><a href="getModelAbout.html">getModelAbout</a>
	<li><a href="getParamAbout.html">getParamAbout</a>
	<li><a href="onModelLoad.html">onModelLoad</a>
	<li><a href="onModelUnload.html">onModelUnload</a>
	<li><a href="onMouseUp.html">onMouseUp</a>
	<li><a href="onSimCreate.html">onSimCreate</a>
	<li><a href="onSimReady.html">onSimReady</a>
	<li><a href="onSimDestroy.html">onSimDestroy</a>
</ul>

<a href="#top"><img src="../../../../images/top.gif" align="right" width="11" height="10" alt="Top of page" border="0"></a><hr width="50%"><a name="Sequence&nbsp;of&nbsp;model&nbsp;function&nbsp;calls"><h3>Sequence&nbsp;of&nbsp;model&nbsp;function&nbsp;calls</h3>
The following represents the typical order of calls to model functions, from the loading of a model until it is unloaded or R2DToo is exited.  (Bold functions are required.)
<ol><li><b><tt>getApiVersion</tt></b> - to check if model is valid
	<li><tt>onModelLoad</tt> - once model has been loaded
	<li><b><tt>getSimHeight/getSimWidth</tt></b> - to set-up a new simulation
	<li><tt>onSimCreate</tt> - once the simulation space has been allocated
	<li><b><tt>onAgentCreate</tt></b> - called once for each agent in space, after each agent has been created
	<li><b><tt>onAgentDraw</tt></b> - once for each agent
	<li><tt>onSimReady</tt> - once the simulation is ready to run
	<li><b><tt>onTick</tt></b> - repeated calls to <tt>onTick</tt> and <tt>onAgentDraw</tt> while simulation running/stepping
	<li><tt>onAgentDestroy</tt> - once for each agent, just before agent is deleted
	<li><tt>onSimDestroy</tt> - just before the simulation space is deleted
	<li><tt>onModelUnload</tt> - just before the model is unloaded
</ol>

<a href="#top"><img src="../../../../images/top.gif" align="right" width="11" height="10" alt="Top of page" border="0"></a><hr width="50%"><a name="Compilers"><h2>Compilers</h2>
Although these functions are listed in the programming language C, the model may be written in any programming environment that can create a standard DLL (this excludes newer versions of MS Visual Basic which can apparently only create ActiveX DLLs).  

<p>If you don't have access to a compiler Borland has released a free version of its command-line compiler.  The download link is:
<ul><li> <a href="http://www.borland.com/bcppbuilder/freecompiler/cppc55steps.html"><tt>http:/<wbr>/<wbr>www<wbr>.borland<wbr>.com/<wbr>bcppbuilder/<wbr>freecompiler/<wbr>cppc55steps<wbr>.html</tt></a> .  
</ul>
For convenience, it is also available as a direct download:
<p><a name="Borland C++ Compiler">&nbsp;<table width="100%" border="1"><tr valign="middle"><td width="20%" align="center" rowspan="5"><table border=0><tr><td align="center"><a style="text-decoration:none" href= "http://www.zoology.ubc.ca/~rikblok/download/freecommandLinetools.exe"><small><small><img src="bccicon.gif" border=0 alt="freecommandLinetools.exe" hspace=2 vspace=2><br><b>freecommandLinetools.exe</b><br>8.52 MB<br>Apr 30, 2004</small></small></a></td></tr></table></td><td align="center" bgcolor="e6e6ff">Borland C++ Compiler version 5.5 </td></tr><tr><td bgcolor="e6ffe6" align="center">Freeware</td></tr></table></p></td></tr></table><a href="#top"><img src="../../../../images/top.gif" align="right" width="11" height="10" alt="Top of page" border="0"></a><hr width="90%" align="center"><table width="100%"><tr valign="top"><td align="left">
<small><small><a name="bottom"><a href="../../../../office.html">[Rik's Office Hours]</a> <a href="../../../../contact.html">[Contact Rik]</a><br>Last updated: Fri Apr 30 2004, 1:40pm</small></small></td><td align="right">
<FORM align="right" method=GET action="http://www.google.com/search"><table align="right"><tr><td>
<INPUT TYPE=text name=q size=25 maxlength=255 value="">
<input type=hidden name=sitesearch value="http://www.zoology.ubc.ca"><input type=hidden name="hq" value="inurl:rikblok"><INPUT type=hidden name=filter value="0"><INPUT type=submit name=btnG VALUE="Search">
</td></tr></TABLE></FORM>
</td></tr></table>


</body></html>
