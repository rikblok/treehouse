<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<title>onSimCreate</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="revisit-after" content="30 days">
<meta name="document-date" content="06 Nov 2004 14:49:37 GMT">
<meta name="robots" content="all"><meta name="language" content="English">
<base target="_top"><meta name="document-date" content="30 Apr 2004 13:43:00 13AprBST-8"></head>
<body background="../bg.jpg"><a name="top"><table width="100%"><tr><td><small><small><b><a href="../../../../index.html">Rik's Treehouse</a> &gt; <a href="../../../../compute.html">Babbling in Binary</a> &gt; <a href="../../../../software/index.html">My Software</a> &gt; <a href="../../../../software/orphan.html">Orphanware</a> &gt; <a href="../../../../software/r2dtoo/index.html">R2DToo</a> &gt; <a href="../../../../software/r2dtoo/help/index.html">R2DToo Help</a> &gt; <a href="../../../../software/r2dtoo/help/api/index.html">For the Programmer</a> &gt; onSimCreate</b></small></small></td></tr></table><img src="../../../../images/top-blank.gif" align="right" width="11" height="10"  alt=""><hr><center><h1>onSimCreate</h1></center>
<table width="100%" cellspacing="2" cellpadding="8"><tr><td valign="top" bgcolor="#ddddff"><small><small><a href="#Declaration">Declaration</a><br></small></small><small><small><a href="#Remarks">Remarks</a><br></small></small><small><small><a href="#Revisions">Revisions</a><br></small></small><small><small><a href="#Example">Example</a><br></small></small><small><small><a href="#See&nbsp;Also">See&nbsp;Also</a><br></small></small></td><td width="*" valign="top"><a name="Declaration"><h2>Declaration</h2><pre>
void __stdcall onSimCreate(void);
</pre><a href="#top"><img src="../../../../images/top.gif" align="right" width="11" height="10" alt="Top of page" border="0"></a><hr width="50%"><a name="Remarks"><h2>Remarks</h2>
This optional function may be provided by the model.  It is called just after a new simulation has been created (but before the agents have been created).  You can use this function to set global variables (shortcuts) to the model parameters.  Also, set local neighbourhoods in this function with the <a href="#see&nbsp;Also"><tt>nbrhd*</tt></a> functions, as demonstrated in the example below.
<a href="#top"><img src="../../../../images/top.gif" align="right" width="11" height="10" alt="Top of page" border="0"></a><hr width="50%"><a name="Revisions"><h2>Revisions</h2>
API v1.5<ul><li>new!  Replaces <tt>simBegin</tt> and <tt>setNbrhd</tt>.
	</ul>
<a href="#top"><img src="../../../../images/top.gif" align="right" width="11" height="10" alt="Top of page" border="0"></a><hr width="50%"><a name="Example"><h2>Example</h2><listing>
unsigned short fadeRate;
double *workspace = NULL;
//---------------------------------------------------------------------------
void __stdcall onSimCreate(void)
{
    // shortcuts
    fadeRate = (unsigned short)(*<a href="getParamRef.html"><tt>getParamRef</tt></a>("Fade Rate"));
    
    // allocate workspace
    workspace = new double[100];

    // set nbr shortcuts for each agent.  Much faster than calling agentAtXY().
    int range = int(*<a href="getParamRef.html"><tt>getParamRef</tt></a>("Neighbourhood Range"));    // truncated
    switch (int(*<a href="getParamRef.html"><tt>getParamRef</tt></a>("Neighbourhood Type"))) {
        case 0: /* mean-field, ignore */
                break;
        case 1: nbrhd1D(range,btPeriodic);      
                break;
        case 2: nbrhdMoore(range,btPeriodic);   
                break;
        case 3: // use floating point "Neighbourhood Range"
                nbrhdRandomER(*<a href="getParamRef.html"><tt>getParamRef</tt></a>("Neighbourhood Range"),true); 
                break;
        case 4: // demonstrates how multiple neighbourhoods can be overlapped
                nbrhdBlocks(range,range);
                nbrhdFractal(range,range,true,true);
                break;
    }
}
//---------------------------------------------------------------------------
void __stdcall onSimDestroy(void);
{
    // free workspace
    delete [] workspace;
    workspace = NULL;
}
//---------------------------------------------------------------------------
</listing><a href="#top"><img src="../../../../images/top.gif" align="right" width="11" height="10" alt="Top of page" border="0"></a><hr width="50%"><a name="See&nbsp;Also"><h2>See&nbsp;Also</h2>
<a href="onSimReady.html"><tt>onSimReady</tt></a>, <a href="onSimDestroy.html"><tt>onSimDestroy</tt></a>, <a href="nbrhd1D.html"><tt>nbrhd1D</tt></a>, <a href="nbrhdBlocks.html"><tt>nbrhdBlocks</tt></a>, <a href="nbrhdCCDM.html"><tt>nbrhdCCDM</tt></a>, <a href="nbrhdFractal.html"><tt>nbrhdFractal</tt></a>, <a href="nbrhdMoore.html"><tt>nbrhdMoore</tt></a>, <a href="nbrhdRandom.html"><tt>nbrhdRandom</tt></a>, <a href="nbrhdRandomER.html"><tt>nbrhdRandomER</tt></a>, <a href="nbrhdVonNeumann.html"><tt>nbrhdVonNeumann</tt></a>.</td></tr></table><a href="#top"><img src="../../../../images/top.gif" align="right" width="11" height="10" alt="Top of page" border="0"></a><hr width="90%" align="center"><table width="100%"><tr valign="top"><td align="left">
<small><small><a name="bottom"><a href="../../../../office.html">[Rik's Office Hours]</a> <a href="../../../../contact.html">[Contact Rik]</a><br>Last updated: Fri Apr 30 2004, 1:43pm</small></small></td><td align="right">
<FORM align="right" method=GET action="http://www.google.com/search"><table align="right"><tr><td>
<INPUT TYPE=text name=q size=25 maxlength=255 value="">
<input type=hidden name=sitesearch value="http://www.zoology.ubc.ca"><input type=hidden name="hq" value="inurl:rikblok"><INPUT type=hidden name=filter value="0"><INPUT type=submit name=btnG VALUE="Search">
</td></tr></TABLE></FORM>
</td></tr></table>


</body></html>

